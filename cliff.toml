#
# cliff.toml â€” Strict Conventional Commits Changelog
#

[git]
# Parse commits according to Conventional Commits
conventional_commits = true
# Exclude non-conventional commits
filter_unconventional = true

# Define custom commit groups (this removes the ugly HTML comments!)
commit_parsers = [
    { message = "^feat", group = "âœ¨ Features" },
    { message = "^fix", group = "ğŸ› Bug Fixes" },
    { message = "^docs", group = "ğŸ“– Documentation" },
    { message = "^perf", group = "ğŸš€ Performance" },
    { message = "^refactor", group = "â™»ï¸ Refactor" },
    { message = "^style", group = "ğŸ¨ Styling" },
    { message = "^test", group = "ğŸ§ª Testing" },
    { message = "^chore", group = "ğŸ”§ Other" },
    { message = "^ci", group = "ğŸ¤– CI/CD" },
    { message = "^build", group = "ğŸ“¦ Build" },
    { message = "^revert", group = "âª Reverts" },
]

[changelog]
# Header for the changelog
header = """
# Changelog
"""
# Trim whitespace from commit messages
trim = true
# Footer
footer = "\n<hr>\n"
# Body template
body = """

## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% for group, commits in commits | group_by(attribute="group") %}{% if commits | length > 0 %}
### {{ group }}
{% for commit in commits %}
- {{ commit.message | trim }} ({{ commit.id | truncate(length=7, end="") }}){% endfor %}
{% endif %}{% endfor %}
"""
